
## vim

[vim日本語ドキュメント](https://vim-jp.org/vimdoc-ja/)


### Concept
ヤンクしたデータとexコマンドを組み合わせて、入力を自動化したものをmapで割り当てる<br>
使用頻度が高く、利用価値の高いコマンドを .vimrc に map しておく

★カーソル位置の文字列を取得<br>
現在のカーソル位置の文字列（単語）をヤンク<br>
```
yiw
```

exコマンドで、`Ctrl+r`の後に、`”`を入力
（現在のカーソル位置の文字列をコピーして、、、続けてexコマンドで何かを行う）
```
:<C-r>”
```

検索した文字列の取得
```
:<C-r>/
```

上記を利用して、新規コマンドを作成（ヤンクしたデータの取得 + exコマンド）

<br>

★ 大量のコードをどうやって読み書きするか？（all.txt ）
あらかじめ自分の見るべきファイルをリストアップしておく<br>
このリストされたファイル(all.txt)経由で、見たいファイル(*.c, *.h)を開く<br>
ターミナルから `vim xx/yy/zz.c` などとはいちいちやらない！<br>
このリスト化されたファイルの一覧をtag-jump, grep の対象とする（IDEのワークスペース）<br>
膨大なディレクトリ群から見るべき対象を絞り込み、一覧を生成する。[生成方法](https://github.com/dogdio/fbt/blob/master/vim/bin/All.sh)は何でもOK。<br>
ディレクトリ名が長い場合は、フォルダを掘って、その中からシンボリックリンクを使う<br>
自分の担当範囲と共通ライブラリ、下位層、上位層当たりを一覧にしておく<br>
```
$ find dir1/ -name “*.[ch]”  > all.txt
$ find dir2/ -name “*.cpp”  >> all.txt
```

```
関係するコードは全てall.txtに記載し、ボタン一発でgrep, tag-jumpできるようにする
  [UpperLayer]
       ↓
  [  My Code ] <--> [Common Library]
       ↓
  [UnderLayer]
```

all.txtを開いて、縦分割 `vs` して、左側に一覧を表示<br>
自分が開きたいファイルをvim上で検索する。`/file<CR>` とすることで、目標物に素早くたどり着く。<br>
ファイルブラウザ、コンソール画面からファイルを探す必要は無い。<br>
カーソルを左において、`Ctrl+f`でファイルを右側に開く（左側には一覧がキープされる）
左側に開く場合は、`Shift+f` 、hoge.c を見ているときに、all.txtに戻るときは、`Shift-A`
```
$ vim all.txt
:vs
/hoge.c
```

```
" .vimrc
map <C-f> 0y$<C-w>l:open <C-r>"<CR>
map F 0y$:open <C-r>"<CR>
map A :open all.txt<CR>
```



「左側に一覧、右側にコード」、のように並べて表示すると見やすくなる<br>
grep結果は右側の下半分に表示される（詳細は後述）<br>
左側でメモをとりつつ、右側にコードを表示するということもできる<br>
all.txt に新しいファイル名を追記して、`Ctrl+f`で新規ファイルとしてオープンできる<br>
